<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WikiTree Tree Viewer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Aquí podrías enlazar tus estilos -->
    <link rel="stylesheet" href="styles.css">
    <!-- jQuery (necesario porque el código usa $) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Aquí podrías enlazar otros scripts como WikiTreeAPI, LoginManager, etc. -->
</head>
<body>
    <!-- Contenedor para login -->
    <div id="wt-api-login"></div>

    <!-- Aquí se renderizarán las vistas -->
    <div id="tree-viewer"></div>

    <script>
    /*
     * index.js convertido a HTML
     * Este script configura el Login Manager y el View Registry para el árbol.
     */

    var wtViewRegistry;
    window.addEventListener("DOMContentLoaded", (event) => {
        const loginManager = new LoginManager(
            WikiTreeAPI,
            (events = {
                onLoggedIn: (user) => {
                    document.querySelector(
                        "#wt-api-login"
                    ).innerHTML = `Logged into Apps: ${user.name} (<a class="apiLogout" href="#">Logout</a>)`;
                },
                onUnlogged: () => {
                    document.querySelector("#wt-api-login").innerHTML = `
              <form id="appsLoginForm" action="https://api.wikitree.com/api.php" method="POST">
                  <input type="hidden" name="action" value="clientLogin">
                  <input type="hidden" id="returnURL" name="returnURL" value="${window.location.href}">
                  <input type="submit" class="small" value="Apps Login"
                    title="Please login to the WikiTree Apps to use the Tree Viewer on non-public profiles.">
              </form>
              `;

                    if (typeof requireAppsLogin != "undefined" && requireAppsLogin) {
                        $("#appsLoginForm").submit();
                    }
                },
            })
        );

        $("body").on("click", ".apiLogout", function (e) {
            e.preventDefault();
            loginManager.logout();
        });

        // Registro de vistas
        const views = {
            "fanchart": new FanChartView(),
            "couples": new CouplesTreeView(),
            "cctree": new CCTView(),
            "ccdtree": new CCDView(),
            "wt-dynamic-tree": new WikiTreeDynamicTreeViewer(),
            "timeline": new TimelineView(),
            "fandoku": new FandokuView(),
            "fractal": new FractalView(),
            "ahnentafel": new AhnentafelView(),
            "surnames": new SurnamesView(),
            "webs": new WebsView(),
            "familygroup": new FamilyView(),
            "printer-friendly": new PrinterFriendlyView(WikiTreeAPI, 6),
            "calendar": new CalendarView(),
            "portraits": new PortraitView(),
            "nameTest": new NameTestView(),
            "cc7": new CC7View(),
            "ale": new ALEView(),
            "descendants": new DescendantsView(),
            "xtree": new XTreeView(),
            "familyGroupApp": new FamilyGroupAppView(),
            "superbig": new SuperBigFamView(),
            "slippyTree": new SlippyTree(),
            "stats": new StatsView(),
            "wtPlusMaps": new WtPlusMaps(),
            "oneNameTrees": new OneNameTrees(),
            "ancestorsCemeteries": new AncestorsCemeteriesView(),
            "heritage": new HeritageView(),
            "timelineTree": new TimelineTreeView(),
        };

        for (let key in views) {
            let meta = views[key]?.meta();
            if (meta?.disabled) {
                delete views[key];
            }
        }

        wtViewRegistry = new ViewRegistry(views, new SessionManager(WikiTreeAPI, loginManager));
        wtViewRegistry.render();
    });
    </script>
</body>
</html>x; flex-wrap: wrap }

    /* Línea de tiempo */
    .timeline {
      position: relative; margin-top: 10px; padding-left: 22px;
    }
    .timeline::before {
      content:""; position: absolute; left: 6px; top: 4px; bottom: 4px;
      width: 2px; background: color-mix(in oklab, var(--gold) 30%, transparent);
    }
    .event {
      position: relative; padding: 10px 12px; margin: 8px 0;
      border: 1px solid color-mix(in oklab, var(--gold) 22%, transparent);
      border-radius: 12px; background: color-mix(in oklab, var(--bg-soft) 94%, transparent);
    }
    .event::before {
      content:"◆"; position: absolute; left: -16px; top: 8px; color: var(--gold); font-size: .9rem;
    }
    .event strong { color: var(--ink) }

    /* Footer */
    footer {
      padding: 26px 0 50px; color: var(--muted);
    }
    .footer-grid { display: grid; grid-template-columns: 1.2fr .8fr; gap: 18px }
    @media (max-width: 880px) { .footer-grid { grid-template-columns: 1fr } }
    .small { font-size: .9rem }

    /* Accesibilidad */
    .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0 }
    :focus-visible { outline: none; box-shadow: var(--ring) }
  </style>
</head>
<body>
  <header class="nav">
    <div class="container bar">
      <a class="brand" href="#inicio" aria-label="Regresar al inicio">
        <span class="mark" aria-hidden="true"></span>
        <span>Sefarad MX</span>
      </a>
      <nav class="links" aria-label="Navegación principal">
        <a href="#mision">Misión</a>
        <a href="#proyectos">Proyectos</a>
        <a href="#archivo">Archivo</a>
        <a href="#contacto">Contacto</a>
      </nav>
    </div>
  </header>

  <main id="inicio" class="hero">
    <div class="container hero">
      <div class="panel">
        <div class="content">
          <div>
            <div class="eyebrow">Raíces vivas</div>
            <h1 class="title">Memoria sefardí en México, contada con rigor y belleza.</h1>
            <p class="lead">
              Sefarad MX es una plataforma para documentar, dignificar y conectar legados familiares con su contexto histórico y cultural.
              Un espacio sobrio, transparente y cercano: heráldica, investigación, archivos y voz comunitaria.
            </p>
            <div class="cta">
              <a class="btn" href="#proyectos">Explorar proyectos</a>
              <a class="btn alt" href="#archivo" aria-label="Ir al archivo">Ver archivo</a>
            </div>
          </div>
          <aside class="mosaic" aria-label="Destellos de contenido">
            <div class="tile one">
              <h4>Heráldica y símbolos</h4>
              <p>Identidad visual con raíces y respeto.</p>
            </div>
            <div class="tile two">
              <h4>Genealogía crítica</h4>
              <p>Documentación verificable, sin concesiones.</p>
            </div>
            <div class="tile three">
              <h4>Voces y memoria</h4>
              <p>Testimonios que dignifican la historia.</p>
            </div>
          </aside>
        </div>
      </div>
    </div>

    <section id="mision">
      <div class="container">
        <div class="section-title">
          <h2>Misión</h2>
          <div class="note">Metodología transparente. Comunidad al centro.</div>
        </div>
        <div class="grid">
          <article class="card" aria-label="Pilar: Documento">
            <h3>Documento</h3>
            <div class="meta">Rigor, fuentes y trazabilidad</div>
            <p>Cada pieza de información se sustenta en evidencias y se enlaza a su contexto. Sin adornos, sin rumores.</p>
            <div class="actions">
              <a class="btn" href="#archivo">Ver metodología</a>
            </div>
          </article>
          <article class="card" aria-label="Pilar: Dignidad">
            <h3>Dignidad</h3>
            <div class="meta">Forma sobria, fondo humano</div>
            <p>El cuidado estético refleja respeto: tipografía clara, color contenido y jerarquía precisa para una lectura serena.</p>
          </article>
          <article class="card" aria-label="Pilar: Comunidad">
            <h3>Comunidad</h3>
            <div class="meta">Escucha activa y participación</div>
            <p>Abrimos espacios para voces familiares y colectivas, conectando memorias con procesos culturales más amplios.</p>
          </article>
        </div>
      </div>
    </section>

    <section id="proyectos">
      <div class="container">
        <div class="section-title">
          <h2>Proyectos</h2>
          <div class="note">Ejes de trabajo y avances publicados</div>
        </div>
        <div class="grid">
          <article class="card">
            <h3>Casa Real — García Gaona</h3>
            <div class="meta">Heráldica y archivo familiar</div>
            <p>Diseño heráldico, relatos y documento histórico con una línea clara entre memoria y ficción.</p>
            <div class="actions">
              <a class="btn" href="#">Abrir</a>
              <a class="btn alt" href="#">Acerca del proyecto</a>
            </div>
          </article>
          <article class="card">
            <h3>Rutas de Sefarad</h3>
            <div class="meta">Cartografías y migraciones</div>
            <p>Mapas interpretativos de trayectorias familiares y comunidades, con notas de fuentes y contexto internacional.</p>
            <div class="actions">
              <a class="btn" href="#">Abrir</a>
            </div>
          </article>
          <article class="card">
            <h3>Voces y testigos</h3>
            <div class="meta">Colección de testimonios</div>
            <p>Entrevistas curadas con consentimiento informado, preservadas con estándares éticos y técnicos.</p>
            <div class="actions">
              <a class="btn" href="#">Abrir</a>
            </div>
          </article>
        </div>
      </div>
    </section>

    <section id="archivo">
      <div class="container">
        <div class="section-title">
          <h2>Archivo vivo</h2>
          <div class="note">Actualizaciones y hitos</div>
        </div>
        <div class="timeline" aria-label="Línea de tiempo de actualizaciones">
          <div class="event">
            <strong>Dic 2025:</strong> Publicación de la página inicial con tipografía accesible y paleta sobria en dorado y azul.
          </div>
          <div class="event">
            <strong>Nov 2025:</strong> Estructura de proyectos y metodología publicada con rutas claras para colaboraciones.
          </div>
          <div class="event">
            <strong>Oct 2025:</strong> Integración de heráldica preliminar y glosario de términos.
          </div>
        </div>
      </div>
    </section>

    <section id="contacto">
      <div class="container">
        <div class="section-title">
          <h2>Contacto</h2>
          <div class="note">Puentes para colaborar con rigor</div>
        </div>
        <div class="grid">
          <article class="card" style="grid-column: span 6;">
            <h3>Colaboraciones</h3>
            <p>¿Tienes documentos, relatos o preguntas? Escríbenos y cuidamos cada detalle con seriedad y respeto.</p>
            <div class="actions">
              <a class="btn" href="mailto:contacto@sefarad.mx">contacto@sefarad.mx</a>
              <a class="btn alt" href="#">Directrices editoriales</a>
            </div>
          </article>
          <article class="card" style="grid-column: span 6;">
            <h3>Transparencia</h3>
            <p>Publicamos cambios y criterios editoriales en un registro abierto. Sin ambigüedades, sin especulación.</p>
            <div class="actions">
              <a class="btn" href="#">Registro de cambios</a>
            </div>
          </article>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container footer-grid">
      <div>
        <div class="brand">
          <span class="mark" aria-hidden="true"></span>
          <strong>Sefarad MX</strong>
        </div>
        <p class="small" style="margin-top:10px;">
          Plataforma independiente dedicada a la memoria sefardí en México.
          Diseño y contenido con criterios de accesibilidad, trazabilidad y dignidad.
        </p>
      </div>
      <div class="small">
        <p>© <span id="year"></span> Sefarad MX. Todos los derechos reservados.</p>
        <p>GitHub Pages • Licencia de contenido según cada documento.</p>
      </div>
    </div>
  </footer>

  <script>
    // Año en footer
    document.getElementById('year').textContent = new Date().getFullYear();

    // Mejora de foco al navegar por anclas
    const smoothFocus = (e) => {
      if (e.target.matches('a[href^="#"]')) {
        const id = e.target.getAttribute('href').slice(1);
        const el = document.getElementById(id);
        if (el) setTimeout(() => el.setAttribute('tabindex','-1'), 120);
      }
    };
    document.addEventListener('click', smoothFocus);
  </script>
</body>
</html>
